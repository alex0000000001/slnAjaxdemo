
@{
    ViewData["Title"] = "Address";
}

<h1>Address</h1>

<select id="select1">

</select>
<select id="select2">
</select>
<select id="select3">
</select>

@section Scripts{ 
    <script>
        const selCity = document.querySelector('#select1');
        const selDistrict = document.querySelector('#select2');
        selCity.addEventListener('change', () => {

            console.log(selCity.options[selCity.selectedIndex].value); //印出名字

            let CityName = (selCity.options[selCity.selectedIndex].value);

            const datas2 = JSON.parse(xhr.responseText);
            datas2.forEach((district) => {

                const opt2 = new Option(district, district);
                selDistrict.options.add(opts);
            })
            //https://localhost:44374/Api/District?city=金門縣

            let ContentStr = `~/Api/District?city=${city}`


            xhr.open("GET", "@Url.Content("~/Api/District")")
            xhr.send();


        })

        const xhr = new XMLHttpRequest();

        xhr.addEventListener('load', () => {
            console.log(xhr.responseText);

            const datas = JSON.parse(xhr.responseText);
            datas.forEach((city) => {
            
            const opt = new Option(city, city);
            selCity.options.add(opt);
            })
        })

        xhr.open("GET", "@Url.Content("~/Api/City")");
        xhr.send();


    </script>
}
